\documentclass{notes}

\class{MATH 131BH (Real Analysis)}

\notusingsubsection

\begin{document}
  \section{3.28 Monday Week 1: Intro to the course. Review of material covered in 131AH: foundations (definition and constructions of naturals and reals), metric space convergence, continuity.}
  
  \section{3.30 Wednesday Week 1: Limit of a function: definition and alternative formulations via images of balls and sequential characterization. Limit on a set, left and right limits for functions on \texorpdfstring{$\mathbb R$}{R}. Discontinuities of first and second kind. Monotone functions have no discontinuities of second kind.}
  
  \underline{{\boldmath \bfseries Limits of functions}}
  
  {\boldmath \bfseries Recall:} $f \colon X \to Y$ is said to be {\boldmath \bfseries continuous at $x \in X$} if 
  \[
    \forall \, \varepsilon > 0 \, \exists \, \delta > 0 \, \forall \, z \in x: \rho_X(x, z) < \delta \Rightarrow \rho(f(z), f(x)) < \varepsilon.
  \]

  Alternatives:
  \begin{itemize}
    \item $f(B_X(x, \delta)) \subseteq B_Y(f(x), \varepsilon)$; 
    \item $\forall \, \left \{ x_n \right \}_{n \in \mathbb N} \in X^\mathbb N: x_n \to x \Rightarrow f(x_n) \to f(x)$.
  \end{itemize}
  
  A function $f \colon X \to Y$ is {\boldmath \bfseries continuous} if 
  \[
    \forall \, x \in X: \text{$f$ is continuous at $x$, }
  \]
  or, alternatively,  
  \[
    \forall \, O \subseteq Y \text{ open}: f^{-1}(O) \text{ open.}
  \]

  \begin{defn}
    A function $f \colon X \to Y$ {\boldmath \bfseries has limit $y \in Y$ at $x \in X$}, notation $\lim_{z \to x} f(z) = y$, if 
    \[
      \forall \, \varepsilon \, \exists \, \delta > 0 \, \forall \, z \in X: 0 < \rho_X(x, z) < \delta \Rightarrow \rho_Y(f(z), y) < \varepsilon.
    \]
    
    Alternatives: 
    \begin{itemize}
      \item $f(B_X(x, \delta) \setminus \left \{ x \right \}) \subseteq B_Y(y, \varepsilon))$; 

      \item $\forall \, \left \{ x_n \right \}_{n \in \mathbb N} \in X^\mathbb N: (\forall \, n \in \mathbb N: x_n \neq x) \land x_n \to x \Rightarrow f(x_n) \to y$; 
        
      \item $g(z) := \begin{cases}
        f(z) & z \neq x \\ 
        y & z = x
      \end{cases}$ is continuous at $x$.
    \end{itemize}
  \end{defn}
  
  \newpage

  \begin{defn}
    $f$ has a {\boldmath \bfseries removable discontinuity} at $x$ if $\lim_{z \to x} f(z)$ exists but $\neq f(x)$.
  \end{defn}
  
  \begin{defn}
    Let $A \subseteq X$ be nonempty, $x \in \overline A$ be not an isolated point.
    Then $\lim_{z \to x} f(z) = \lim_{z \to x} f_A(z)$ where $f_A$ is the restriction of $f$ to $A$.
  \end{defn}
  
  \begin{defn}
    For $f \colon \mathbb R \to \mathbb R$, let $x \in \overline{\operatorname{Dom}(f)}$ be such that $\operatorname{Dom}(f) \cap (x, \infty) \neq \varnothing$ and $\operatorname{Dom}(f) \cap (-\infty, x) \neq \varnothing$.
    Then $\lim_{z \to x^+} f(z) := \lim_{z \to x, z \in \operatorname{Dom}(f) \cap (x, \infty)} f(z) \land \lim_{z \to x^-} f(z) := \lim_{z \to x, z \in \operatorname{Dom}(f) \cap (-\infty, x)} f(z)$ are the {\boldmath \bfseries right / left limits of $f$ at $x$}.

    Alternative notation: $f(x^+)$, $f(x^-)$.
  \end{defn}
  
  \begin{eg}
    \begin{equation}
      f(x) = \begin{cases}
        1 & x \in \mathbb Q \\ 
        0 & x \not \in \mathbb Q
      \end{cases}
    \end{equation}
    has no right or left limits.
  \end{eg}
  
  \begin{eg}
    \begin{equation}
      f(x) = \begin{cases}
        \frac{1}{n + 1} & x = q_n \text{ where $\left \{ q_n \right \}_{n \in \mathbb N}$ enumerates $\mathbb Q$} \\ 
        0 & x \not \in \mathbb Q.
      \end{cases}
    \end{equation}
    Then $\forall \, x \not \in \mathbb Q: \lim_{z \to x} f(z) = 0$ so $f$ is continuous on $\mathbb R \setminus \mathbb Q$, and $\forall \, x \in \mathbb Q: \lim_{z \to x} f(z) = 0$ but $f$ is not continuous at $x$.
  \end{eg}
  
  \begin{lem}
    \[
      \forall \, r > 0 \, \forall \, \varepsilon > 0: \left \{ x \in \mathbb R : \left | x \right | < r \land \left | f(x) \right | > \varepsilon \right \} \text{finite} \Rightarrow \forall \, x \in \mathbb R: \lim_{z \to x} f(z) = 0.
    \]
  \end{lem}
  
  \begin{defn}
    A function $f \colon \mathbb R \to \mathbb R$ has a {\boldmath \bfseries discontinuity of }
    \begin{itemize}
      \item {\boldmath \bfseries first kind} at $x$ if $f(x^+)$ and $f(x^-)$ exist but are not both equal to $f(x)$;

      \item {\boldmath \bfseries second kind} at $x$ if one or both of $f(x^+)$ and $f(x^-)$ don't exist.
    \end{itemize}
  \end{defn}
  
  \newpage
  
  \begin{eg}
    \begin{equation}
      f(x) := \begin{cases}
        (-1)^n & x = \frac{1}{n + 1}, n \in \mathbb N \\ 
        \text{linear} & x \in (0, \infty) \setminus \left \{ \frac{1}{n + 1} : n \in \mathbb N \right \} \\ 
        0 & x \leq 0.
      \end{cases}
    \end{equation}
    
    % todo: add figure?
    
    This function has a discontinuity of second kind at 0.
  \end{eg}

  \begin{lem}
    Let $f \colon \mathbb R \to \mathbb R$ ($\operatorname{Dom}(f) = \mathbb R$) be monotone.
    Then $\forall \, x \in \mathbb R: \text{$f(x^+), f(x^-)$ exist}$ and so $f$ has no discontinuities of second kind.
  \end{lem}
  
  \begin{prf}
    Let $x \in \mathbb R$ and assume $f$ is nondecreasing.
    We claim that $\lim_{z \to x^+} f(z) = \inf \left \{ f(z) : z > x \right \}=: L$.

    Indeed, $\forall \, z > x: f(z) \geq f(x)$, so $L \geq f(x)$ and so $L \in \mathbb R$.
    Then $(\forall \, z > x: L \leq f(z)) \land (\forall \, \varepsilon > 0 \, \exists \, z_\varepsilon  > x: f(z_\varepsilon) < L + \varepsilon)$.
    Let $\delta := z_\varepsilon - x$.
    Then $\forall \, z \in (x, x + \delta): f(z) \leq f(z_\varepsilon) < L + \varepsilon$.
    Then $\forall \, z \in (x, x + \delta): L \leq f(z) < L + \varepsilon$ and therefore $\left | f(z) - L \right | < \varepsilon$.
    Then $\lim_{z \to x^+} f(z) = L$.
  \end{prf}
  
  \section{3.31 Thursday Week 1: Monotone functions have only countably many discontinuities. Functions of bounded variation. Jordan decomposition theorem. Comments on uniqueness. Rectifiability of curves. Limsup and liminf of a function.}
  
  \underline{\boldmath \bfseries Limits of functions}
  
  Last time we showed that monotone functions have no discontinuities of second time.

  \begin{lem}
    Let $f \colon \mathbb R \to \mathbb R$ be monotone.
    Then $\left \{ x \in \mathbb R : f(x^+) \neq f(x^-) \right \}$ is countable.
  \end{lem}
  
  \begin{prf}
    Pick $k, m \in \mathbb N$ and let $A_{m, k} := \left \{ x \in [-m, m] : \left | f(x^+) - f(x^-) \right | > \frac{1}{k + 1} \right \}$.
    We claim that $A_{m, k}$ is finite.
    
    Let $x_{0} < x_{1} < \cdots < x_n$ be such that $\forall \, i \leq n: x_i \in A_{k, m}$.
    Assume (without loss of generality) that $f$ is non-decreasing.
    Then 
    \begin{align}
      f(m + 1) &\geq f(x_n^+) = f(x_0^+) + \sum_{i = 1}^n \left ( f(x_i^+) - f(x_{i - 1}^+) \right ) \nonumber \\ 
      &\geq f(m - 1) + \sum_{i = 1}^n \left ( f(x_i^+) - f(x_i^-) \right ) \nonumber \\ 
      &\geq f(-m + 1) + \frac{n}{k + 1}.
    \end{align}
    Then $n \leq (k + 1)$.
    Since $\left \{ x \in \mathbb R : f(x^+) \neq f(x^-) \right \} = \bigcup_{k \in \mathbb N} \bigcup_{m \in \mathbb N} A_{k, m}$, we are done.
  \end{prf}
  
  {\boldmath \bfseries  Q:} Can these be generalized to other functions?

  \begin{defn}
    A {\boldmath \bfseries partition} $\Pi$ of an interval $[a, b]$ is a sequence $\left \{ t_i \right \}_{i = 0}^n$ such that 
    \[
      a = t_0 < t_{1} < \cdots < t_{n - 1} < t_n = b.
    \]
  \end{defn}
  
  \begin{defn}
    Given $f \colon [a, b] \to \mathbb R$, its {\boldmath \bfseries total variation} on $[a, b]$
    \[
      V(f, [a, b]) := \sup_{\Pi = \left \{ t_i \right \}_{i = 0}^n} \sum_{i = 1}^n \left | f(t_i) - f(t_{i - 1}) \right | 
    \]
    where the supremum if over the partitions of $[a, b]$.
  \end{defn}
  
  \begin{defn}
    $f$ is said to be of {\boldmath \bfseries bounded variation} on $[a, b]$ if $V(f, [a, b]) < \infty$.
  \end{defn}
  
  \begin{lem}
    If $f \colon \mathbb R \to \mathbb R$ is of bounded variation on $[-m, m]$ for all $m \in \mathbb N$, then $f$ has only discontinuities of first kind and the set $\left \{ x \in \mathbb R : f(x^+) \neq f(x^-) \right \}$ is countable.
  \end{lem}
  
  \begin{thm}[Jordan decomposition (1881)]
    Let $f \colon [a, b] \to \mathbb R$ obey $V(f, [a, b]) < \infty$.
    Then $\exists \, h, g \colon [a, b] \to \mathbb R$ nondecreasing such that $\forall \, t \in [a, b]: f(t) = h(t) - g(t)$.
  \end{thm}
  
  \begin{prf}
    Define $h(t) := V(f, [a, t])$ and $g(t) := V(f, [a, t]) - f(t)$.
    Note that $h(t) - g(t) = f(t)$.

    We need to show that $h$ and $g$ are nondecreasing.
    
    Let $a \leq t < t' \leq b$.
    Then for any partition $\Pi$ of $[a, t]$.
    $\Pi' = \Pi \cup \left \{ t' \right \}$ is a partition of $[a, t']$.
    Then 
    \begin{equation}
      V(f, [0, t']) \geq \sum_{i = 1}^m \left | f(t_i) - f(t_{i - 1}) \right | + \left | f(t') - f(t) \right |.
    \end{equation}
    Taking supremum over $\Pi$ gives 
    \begin{equation}
      V(f, [a, t']) \geq V(f, [a, t]) + \left | f(t') - f(t) \right |.
    \end{equation}
    Note that $\left | f(t') - f(t) \right | \geq 0$ and $\left | f(t') - f(t) \right | \geq f(t') - f(t)$.
    Then $h(t') \geq h(t)$ and $g(t') \geq g(t)$.
  \end{prf}
  
  \strut
  
  The representation of $f = h - g$ is called a Jordan decomposition.
  This is not unique because a nondecreasing function can be added to both $h$ and $g$.
  
  However, there is a minimal decomposition $f = h_{0} - g_{0}$ such that $g_0(a) = 0$ such that for any other Jordan decomposition $f = h - g$ we have $h - h_0$, $g - g_0$ nondecreasing.
  This is then \textit{the} Jordan decomposition.
  
  \strut
  
  \underline{{\boldmath \bfseries Rectifiability of curves}}
  
  \begin{defn}
    Let $(X, \rho)$ be a metric space.
    A curve $\mathcal C$ is $\operatorname{Ran}(f)$ for an $f \colon \mathbb R \to X$ continuous such that $\operatorname{Dom}(f)$ is nonempty and connected.
    This $f$ is called a {\boldmath \bfseries parametrization} of $\mathcal C$.
  \end{defn}
  
  \begin{defn}
    Assuming $\operatorname{Dom}(f) = [a, b]$, the {\boldmath \bfseries length of $\mathcal C$} is 
    \[
      \ell(\mathcal C) := \sup_{\Pi = \left \{ t_i \right \}_{i = 1}^n} \sum_{i = 1}^n \rho(f(t_{i - 1}), f(t_i)).
    \]
  \end{defn}
  
  \begin{defn}
    A curve is {\boldmath \bfseries rectifiable} if $\ell(\mathcal C) < \infty$.
  \end{defn}
  
  \begin{defn}
    Let $(X, \rho)$ be a metric space and $f \colon X \to \mathbb R$.
    Then 
    \[
      \limsup_{z \to x} f(z) := \inf_{\delta > 0} \sup_{z \in B(x, \delta) \setminus \left \{ x \right \}} f(z)
    \]
    and 
    \[
      \liminf_{z \to x} f(z) := \sup_{\delta > 0} \inf_{z \in B(x, \delta) \setminus \left \{ x \right \}} f(z).
    \]
  \end{defn}
  
  \begin{lem}
    \[
      \lim_{z \to x} f(z) \text{ exists in $\mathbb R$} \Leftrightarrow \limsup_{z \to x} f(z) = \liminf_{z \to x} f(z) \in \mathbb R.
    \]
  \end{lem}
  
  \newpage
  
  \section{4.1 Friday Week 1: Discussion}
  
  \begin{defn}
    Let $(X, \rho_X)$, $(Y, \rho_Y)$ be metric spaces, $E \subseteq X$, $f \colon E \to Y$, and $x \in \overline E$.
    Then $\lim_{t \to x} f(t) = \alpha$ is defined by 
    \[
      \forall \, \varepsilon > 0 \, \exists \, \delta > 0: \forall \, x \in E \land 0 < \rho_X(t, x) < \delta \Rightarrow \rho_Y(f(t), \alpha) < \varepsilon.
    \]
    
    Equivalently, 
    \[ 
      \forall \, \left \{ t_n \right \}_{n \in \mathbb N} \in (E \setminus \left \{ x \right \})^\mathbb N: t_n \to x \Rightarrow f(t_n) \to \alpha.
    \]

    \begin{note}
      $f$ need not be defined at $x$.
    \end{note}
  \end{defn}
  
  \begin{rmk}
    \[
      \limsup_{t \to x} f(t) := \inf_{\delta > 0} \sup_{t \in B(x, \delta) \setminus \left \{ x \right \}} f(t) = \lim_{\delta \to 0} \sup_{t \in B(x, \delta) \setminus \left \{ x \right \}} f(t).
    \]
    $\liminf$ is similarly defined.
  \end{rmk}
  
  \begin{rmk}
    \[
      \limsup = \liminf \Rightarrow \text{$\lim$ exists.}
    \]
  \end{rmk}
  
  \underline{{\boldmath \bfseries Discontiuities}}
  
  \begin{defn}
    Let $f \colon (a, b) \to \mathbb R$ be not continuous at $x$. Then $f$ has a {\boldmath \bfseries discontinuity of first kind} at $x$ if $f(x+)$ and $f(x-)$ both exist.
    Otherwise it is of {\boldmath \bfseries second kind}.
  \end{defn}
  
  \begin{rmk}
    Discontinuities of the first kind are also known as {\boldmath \bfseries simple discontinuities}.
    The cases include 
    \begin{itemize}
      \item $f(x+) = f(x-) \neq f(x)$: {\boldmath \bfseries removable discontinuity}, and  

      \item $f(x+) \neq f(x-)$: {\boldmath \bfseries jump discontinuity}.
    \end{itemize}
  \end{rmk}
  
  \begin{eg}
    \begin{equation}
      f(x) = \begin{cases}
        \sin \left ( \frac{1}{x} \right ) & x \neq 0 \\ 
        0 & x = 0
      \end{cases}
    \end{equation}
    has a discontinuity of second kind at 0.
  \end{eg}
  
  \begin{eg}
    \begin{equation}
      f(x) = \begin{cases}
        \frac{1}{q} & x = \frac{p}{q} \in \mathbb Q \\ 
        0 & x \in \mathbb R \setminus \mathbb Q
      \end{cases}
    \end{equation}
    is continuous on $\mathbb R \setminus \mathbb Q$ and has discontinuities of first kind (removable) at every point in $\mathbb Q$.
  \end{eg}
  
  {\boldmath \bfseries Recall:} A monotone function has no discontinuity of second kind and has at most countably many discontinuities of first kind.
  One can deduce this from the fact that the real line is a union of countably many open intervals (indexed by rationals).
  
  \begin{defn}
    A function $f \colon (a, b) \to \mathbb R$ is convex if 
    \[
      \forall \, x, y \in (a, b): x \leq y \Rightarrow (\forall \, \lambda \in [0, 1]: f(\lambda x + (1 - \lambda) y)) \leq \lambda f(x) + (1 - \lambda) f(y).
    \]
    In words, this means that for any interval, the secant line is above the graph.
  \end{defn}
  
  \section{4.4 Monday Week 2}
  
  \underline{\boldmath \bfseries Last time:} $\lim_{z \to x} f(z)$, $\limsup_{z \to x} f(z) = \inf_{\delta > 0} \sup_{z \in B(x, \delta) \setminus \left \{ x \right \}x} f(z)$
  
  \begin{lem}
    \[
      \lim_{z \to x} f(z) \text{ exists (in $\mathbb R$)} \Leftrightarrow \limsup_{z \to x} f(z) = \liminf_{z \to x} f(z) \in \mathbb R.
    \]
  \end{lem}
  
  \begin{prf}
    Both are equivalent: 
    \[
      \forall \, \varepsilon > 0 \, \exists \, \delta > 0: 0 \leq \sup_{z \in B(x, \delta) f(z) \setminus \left \{ x \right \}} - \inf_{z \in B(x, \delta) \setminus \left \{ x \right \}} f(z) \leq 2 \varepsilon.
    \]
  \end{prf}
  
  \begin{defn}
    \[
      \lim_{z \to x} f(z) = \begin{cases}
        +\infty & \limsup_{z \to x} f(z) = \liminf_{z \to x} f(z) = +\infty \\
        -\infty & \limsup_{z \to x} f(z) = \liminf_{z \to x} f(z) = -\infty.
      \end{cases}
    \]
  \end{defn}
  
  \begin{note}
    This characterization works even outside $\mathbb R$-valued functions:
    \[
      \lim_{z \to x} f(z) \text{ exists} \Leftrightarrow \lim_{\delta \to 0^+} \sup \underbrace{\left \{ \rho(f(z), f(u)) : z, u \in B(x, \delta) \setminus \left \{ x \right \} \right \}}_{= \operatorname{diam}(f(B(x, \delta) \setminus \left \{ x \right \}))} = 0.
    \]
  \end{note}
  
  \underline{\boldmath \bfseries The derivative}

  \begin{defn}
    Let $f \colon \mathbb R \to \mathbb R$, $x \in \operatorname{int} (\operatorname{Dom}(f))$.
    We say that $f$ has {\boldmath \bfseries derivative} or {\boldmath \bfseries is differentiable at $x$} if 
    \[
      f'(x) := \lim_{z \to x} \frac{f(z) - f(x)}{z - f} \text{ exists in $\mathbb R$}.
    \]
    
    We call $f'(x)$ (Lagrange notation) the {\boldmath \bfseries derivative at $x$}, alternative notation $\frac{df}{dx}$ (Leibnitz notation).
  \end{defn}
  
  \begin{lem}
    \[
      f'(x) \text{ exists} \Rightarrow \text{$f$ continuous at $x$}.
    \]
  \end{lem}
  
  \begin{prf}
    The existence of $f'(x)$ implies that $\exists \, \delta_0 > 0 \, \forall \, z \in \mathbb R: 0 < \left | z - x \right | < \delta_0 \Rightarrow \left | \frac{f(z) - f(x)}{z - x} \right | \leq 1 + \left | f'(x) \right |$.
    Then, choosing $\varepsilon > 0$ and letting $\delta := \frac{\varepsilon}{1 + \left | f'(x) \right |}$, we get 
    \[
      \forall \, z \in \mathbb R: 0 < \left | z - x \right | < \sigma \mathbb \Rightarrow \left | f(z) - f(x) \right | \leq (1 + \left | f'(x) \right |) \left | z - x \right | < (1 + \left | f'(x) \right |) = \varepsilon.
    \]
    Since $f(z) - f(x) = 0$ for $z = x$, we are done (in fact, we have shown that $f$ is lipschitz continuous).
  \end{prf}
  
  Another way to write existence of $f'(x)$: 
  \[
    f(z) - f(x) = (f'(x) + u_x(z)) (z - x)
  \]
  where $\lim_{z \to x} u_x(z) = 0$.
  (Just define: $u_x(z) := \frac{f(z) - f(x)}{z - x} - f'(x)$ for $z \neq x$)
  
  \begin{lem}[Linear approximation]
    \[
      \text{$f'(x)$ exists} \Leftrightarrow \exists \, L \in \mathbb R: \lim_{\delta \to 0^+} \sup_{\left | z - x \right | < \delta} \frac{1}{\delta} \left | f(z) - f(x) - L (z - x) \right | = 0.
    \]
  \end{lem}
  
  \begin{lem}[Sum \& product rule]
    Let $f, g$ be differentiable at $x$.
    Then so are $f + g$ and $f \cdot g$ and 
    \begin{align*}
      (f + g)'(x) &= f'(x) + g'(x) \\ 
      (f \cdot g)'(x) &= f'(x) g(x) + g'(x) f(x) \text{(Leibnizt rule)}.
    \end{align*}
  \end{lem}
  
  \begin{prf}[Product rule]
    \[
      f(z) g(z) - f(x) g(x) = (f(z) - f(x)) g(z) + (g(z) - g(x)) f(z).
    \]
    Then 
    \[
      \frac{f(z) g(z) - f(x) g(x)}{z - x} = \frac{f(z) - f(x)}{z - x} g(z) + \frac{g(z) - g(x)}{z - x} f(z).
    \]
    Since $g(z) \to g(x)$ by continuity of $g$, formula follows by sum \& product rule for limit.
  \end{prf}
  
  \begin{lem}[Chain rule]
    Let $f$ be differentiable at $x$ and $g$ at $f(x)$.
    Then $g \circ f$ is differentiable at $x$ and 
    \[
      (g \circ f)'(x) = g'(f(x)) f'(x) \quad \left ( \frac{dg}{df} \frac{df}{dx} \right )
    \]
  \end{lem}
  
  \newpage
  
  \begin{prf}
    Define $v_{f(x)}$ such that $g(y) - g(f(x)) = (g'(f(x))) + v_{f(x)}(y)) (y  - f(x))$ and $u_x$ such that $f(z) - f(x) = (f'(x) + u_x(z)) (z - x)$.
    \begin{align*}
      (g \circ f)(z) - (g \circ f)(x) &= [g'(f(x)) + v_{f(x)(f(z))}] (f(z) - f(x)) \\ 
      &= [g'(f(x)) + v_{f(x)}(f(z))] [f'(x) + u_x(z)] (z - x)
    \end{align*}
    Dividing by $z - x \neq 0$, note that $f(z) \to f(x)$ implies $v_{f(x)}(f(z)) \to 0$ as $z \to x$, we are done.
  \end{prf}
  
  \begin{lem}
    Let $f \colon \mathbb R \to \mathbb R$ be injective on $\operatorname{Dom}(f)$ and differentiable at $x \in \operatorname{int}(\operatorname{Dom}(f))$.
    Assume $f'(x) \neq 0$ and $f(x) \in \operatorname{int}(\operatorname{Ran}(f))$.
    Then $f^{-1}$ is differentiable at $f(x)$ and 
    \[
      (f^{-1})'(f(x)) = \frac{1}{f'(x)}.
    \]
    
    In Leibnitz notation: 
    \[
      \frac{dy}{dx} = \frac{1}{\frac{dx}{dy}}.
    \]
  \end{lem}
  
  \begin{lem}[First derivative test]
    Let $f \colon [a, b] \to \mathbb R$ be continuous on $[a, b]$ and differentiable on $(a, b)$.
    Then if $x \in (a, b)$ is a local maximum of $f$ (i.e. $\exists \, \delta > 0 \, \forall \, z \in \mathbb R: \left | z - x \right | < \delta \Rightarrow f(x) \geq f(z)$) then $f'(x) = 0$.
  \end{lem}
  
  \begin{prf}
    \[
      z > x \land \left | z - x \right | < \delta \Rightarrow \frac{f(z) - f(x)}{z - x} \leq 0 \Rightarrow f'(x) \leq 0
    \]
    and 
    \[
      z < x \land \left | z - x \right | < \delta \Rightarrow \frac{f(z) - f(x)}{z - x} \geq 0 \Rightarrow f'(x) \geq 0.
    \]
  \end{prf}
\end{document}